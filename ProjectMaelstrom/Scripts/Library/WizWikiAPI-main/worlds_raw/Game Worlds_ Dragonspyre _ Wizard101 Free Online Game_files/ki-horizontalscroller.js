var hScrollerArray=[];var hScroller;var addScroller,loadScrollers;(function(b,a,c,d){hScroller=function(n,p){if(typeof(p)!="object"){Tapestry.error("Scroller Error: options object not provided in addScroller() call.");return}if(typeof(p.id)!="string"){Tapestry.error("Scroller Error: scroller id not provided in options object in addScroller() call.");return}this.scrollerId=p.id;this.step=p.step?p.step:2;this.duration=p.duration?p.duration:0.6;this.listWrapper=null;this.prevButton=null;this.nextButton=null;this.numItems=0;this.itemOffsets=[];this.currentIndex=0;this.lastNextIndex=0;var l;var j;var g;var e;var o;var m;var h=0;var f=0;l=a.getElementById(this.scrollerId);j=l.getElementsByTagName("div")[0];e=a.createElement("div");e.className="hscrollprev";this.prevButton=a.createElement("span");e.appendChild(this.prevButton);l.insertBefore(e,j);o=a.createElement("div");o.className="hscrollnext";this.nextButton=a.createElement("span");o.appendChild(this.nextButton);l.appendChild(o);m=l.scrollWidth-e.scrollWidth-o.scrollWidth-10;this.listWrapper=j.getElementsByTagName("ul")[0];g=this.listWrapper.getElementsByTagName("li");this.numItems=g.length;for(var k=0;k<this.numItems;k++){this.itemOffsets[k]=f;f+=g[k].scrollWidth;h=g[k].scrollHeight>h?g[k].scrollHeight:h}this.listWrapper.style.width=f+1+"px";j.style.width=m+"px";j.style.height=h+"px";e.style.height=h+"px";o.style.height=h+"px";if(m<f){for(var k=this.numItems-1;this.lastNextIndex==0;k--){if(f-this.itemOffsets[k]>m){this.lastNextIndex=k+1;this.itemOffsets[this.lastNextIndex]=f-m}}this.prevButton.onclick=function(i){return function(){hScrollerArray[i].scrollPrev()}}(n);this.nextButton.onclick=function(i){return function(){hScrollerArray[i].scrollNext()}}(n);this.prevButton.style.display="none";this.nextButton.style.display="block"}else{this.prevButton.style.display="none";this.nextButton.style.display="none"}};hScroller.prototype.scrollPrev=function(){this.currentIndex-=this.step;this.currentIndex=this.currentIndex<0?0:this.currentIndex;new Effect.Move(this.listWrapper,{x:-(this.itemOffsets[this.currentIndex]),y:0,mode:"absolute",duration:this.duration});this.prevButton.style.display=this.currentIndex!=0?"block":"none";this.nextButton.style.display=this.currentIndex!=this.lastNextIndex?"block":"none"};hScroller.prototype.scrollNext=function(){this.currentIndex+=this.step;this.currentIndex=this.currentIndex<this.lastNextIndex?this.currentIndex:this.lastNextIndex;new Effect.Move(this.listWrapper,{x:-(this.itemOffsets[this.currentIndex]),y:0,mode:"absolute",duration:this.duration});this.prevButton.style.display=this.currentIndex!=0?"block":"none";this.nextButton.style.display=this.currentIndex!=this.lastNextIndex?"block":"none"};addScroller=function(e){hScrollerArray.push(e);if(hScrollerArray.length==1){ki.addToBodyLoad(loadScrollers)}};loadScrollers=function(){for(var e=0;e<hScrollerArray.length;e++){if(!hScrollerArray[e].hasOwnProperty("scrollerId")){hScrollerArray[e]=new hScroller(e,hScrollerArray[e])}}}})(window,document,null);